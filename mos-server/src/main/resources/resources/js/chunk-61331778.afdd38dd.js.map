{"version":3,"sources":["webpack:///./src/pages/viewer/VideoViewer.vue?b5ab","webpack:///./src/pages/viewer/VideoViewer.vue?d133","webpack:///./node_modules/@babel/runtime/helpers/esm/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/esm/createClass.js","webpack:///src/pages/viewer/VideoViewer.vue","webpack:///./src/utils/lock.js","webpack:///./src/pages/viewer/VideoViewer.vue?cc93","webpack:///./src/pages/viewer/VideoViewer.vue","webpack:///./node_modules/vue-infinite-scroll/vue-infinite-scroll.js"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","staticStyle","span","_v","_s","active","fileName","visits","readableSize","updatedDate","_e","query","path","currentPlayIndex","maxTotal","on","scrollToPosition","ref","directives","name","rawName","value","expression","hasNextPage","videos","emptyText","scopedSlots","_u","key","fn","item","index","class","id","$event","playChange","slot","videoLength","loading","staticRenderFns","_classCallCheck","instance","Constructor","TypeError","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","_createClass","protoProps","staticProps","prototype","Lock","state","resolve","rs","setTimeout","doWithLock","component","global","factory","module","exports","ctx","throttle","delay","now","lastExec","timer","context","args","execute","apply","arguments","Date","clearTimeout","diff","getScrollTop","element","window","Math","max","pageYOffset","document","documentElement","scrollTop","getComputedStyle","defaultView","getScrollEventTarget","currentNode","tagName","nodeType","overflowY","parentNode","getVisibleHeight","clientHeight","getElementTop","getBoundingClientRect","top","isAttached","doBind","binded","directive","el","throttleDelayExpr","getAttribute","throttleDelay","Number","vm","isNaN","scrollEventTarget","scrollListener","doCheck","bind","addEventListener","$on","removeEventListener","disabledExpr","disabled","$watch","immediateCheck","call","Boolean","distanceExpr","distance","immediateCheckExpr","eventName","force","viewportScrollTop","viewportBottom","shouldTrigger","scrollHeight","elementBottom","offsetHeight","InfiniteScroll","binding","vnode","$nextTick","bindTryCount","tryBind","unbind","install","Vue","infiniteScroll","use"],"mappings":"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","file":"js/chunk-61331778.afdd38dd.js","sourcesContent":["import mod from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoViewer.vue?vue&type=style&index=0&id=513d90f4&scoped=true&lang=css&\"; export default mod; export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoViewer.vue?vue&type=style&index=0&id=513d90f4&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"video-block\"},[_c('a-row',{attrs:{\"type\":\"flex\"}},[_c('a-col',{staticStyle:{\"padding-right\":\"5px\"},attrs:{\"xs\":{span:24},\"sm\":{span:24},\"md\":{span:16}}},[(_vm.isMobile)?_c('a-affix',[_c('div',{staticClass:\"player\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":\"videoContainer\"}},[_c('video')])]):_c('div',{staticClass:\"player\",staticStyle:{\"width\":\"100%\",\"height\":\"100%\"},attrs:{\"id\":\"videoContainer\"}},[_c('video')]),(_vm.active)?_c('div',{staticStyle:{\"padding\":\"10px\"}},[_c('h4',[_vm._v(_vm._s(_vm.active.fileName))]),_c('div',{staticClass:\"space\"},[_c('span',{staticClass:\"span-desc\"},[_vm._v(_vm._s(_vm.active.visits)+\"次观看\")]),_c('span',{staticClass:\"span-desc\"},[_vm._v(\"文件大小：\"+_vm._s(_vm.active.readableSize))]),_c('span',{staticClass:\"span-desc\"},[_vm._v(\"更新时间：\"+_vm._s(_vm.active.updatedDate))])])]):_vm._e()],1),_c('a-col',{staticStyle:{\"color\":\"#fff\"},attrs:{\"xs\":{span:24},\"sm\":{span:24},\"md\":{span:8}}},[_c('div',[_c('div',{staticClass:\"video-container-header\",staticStyle:{\"padding\":\"10px\",\"color\":\"#000\",\"background\":\"#fff\"}},[_c('span',{staticStyle:{\"font-weight\":\"600\",\"font-size\":\"14px\",\"margin\":\"0\"}},[_vm._v(\"文件夹：\"+_vm._s(_vm.query.path))]),_c('br'),_c('span',{staticStyle:{\"font-size\":\"12px\",\"color\":\"#999\"}},[_vm._v(\"当前播放：\"+_vm._s(_vm.currentPlayIndex)),_c('span',{staticStyle:{\"margin\":\"0 3px\"}},[_vm._v(\"/\")]),_vm._v(_vm._s(_vm.maxTotal)+\" \"),_c('a-icon',{staticStyle:{\"cursor\":\"pointer\",\"margin-left\":\"10px\"},attrs:{\"type\":\"environment\"},on:{\"click\":_vm.scrollToPosition}})],1)]),_c('div',{ref:\"container\",staticClass:\"video-list-container\",staticStyle:{\"border\":\"1px solid #ccc\",\"overflow-y\":\"auto\",\"overflow-x\":\"hidden\"}},[_c('div',{directives:[{name:\"infinite-scroll\",rawName:\"v-infinite-scroll\",value:(_vm.handleInfiniteOnLoad),expression:\"handleInfiniteOnLoad\"}],ref:\"infinite\",staticClass:\"demo-infinite-container video-list\",attrs:{\"infinite-scroll-disabled\":!_vm.hasNextPage,\"infinite-scroll-distance\":10}},[_c('a-list',{attrs:{\"item-layout\":\"horizontal\",\"data-source\":_vm.videos,\"locale\":{emptyText:'暂无数据'}},scopedSlots:_vm._u([{key:\"renderItem\",fn:function(item,index){return _c('a-list-item',{class:(\"list-item \" + (_vm.active && _vm.active.id === item.id ? 'active'  : '')),on:{\"click\":function($event){return _vm.playChange(item)}}},[_c('a-list-item-meta',[_c('div',{staticStyle:{\"overflow\":\"hidden\",\"line-height\":\"20px\"},attrs:{\"slot\":\"title\"},slot:\"title\"},[_c('h4',{staticStyle:{\"word-break\":\"break-all\",\"overflow\":\"hidden\",\"-webkit-line-clamp\":\"2\",\"-webkit-box-orient\":\"vertical\",\"display\":\"-webkit-box\"}},[_vm._v(\" \"+_vm._s(item.fileName)+\" \")])]),_c('div',{staticStyle:{\"line-height\":\"12px\"},attrs:{\"slot\":\"description\"},slot:\"description\"},[_c('div',{staticClass:\"space\"},[_c('span',{staticClass:\"span-desc\"},[_vm._v(_vm._s(item.visits)+\"次观看\")]),_c('span',{staticClass:\"span-desc\"},[_vm._v(_vm._s(item.readableSize))])])]),_c('div',{staticStyle:{\"padding-left\":\"25px\",\"position\":\"relative\",\"font-size\":\"12px\"},attrs:{\"slot\":\"avatar\"},slot:\"avatar\"},[_c('div',{staticStyle:{\"position\":\"absolute\",\"left\":\"0\",\"font-size\":\"12px\",\"width\":\"25px\",\"text-align\":\"center\",\"line-height\":\"65px\",\"color\":\"#000\"}},[_vm._v(\" \"+_vm._s(index+1)+\" \")]),_c('Thumb',{staticStyle:{\"width\":\"110px\",\"height\":\"65px\"},attrs:{\"video-length\":item.videoLength,\"src\":(\"/mos/\" + (_vm.query.bucket) + (item.urlEncodePath) + \"?thumb=true\")}})],1)])],1)}}])},[(_vm.loading && _vm.hasNextPage)?_c('div',{staticClass:\"demo-loading-container\"},[_c('a-spin')],1):_vm._e()])],1)])])])],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","export default function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nexport default function _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}","<!--suppress XmlDuplicatedId -->\r\n<template>\r\n\t<div class=\"video-block\">\r\n\t\t<a-row type=\"flex\">\r\n\t\t\t<a-col :xs=\"{span:24}\" :sm=\"{span:24}\" :md=\"{span:16}\" style=\"padding-right: 5px;\">\r\n\t\t\t\t<a-affix v-if=\"isMobile\">\r\n\t\t\t\t\t<div id=\"videoContainer\" style=\"width: 100%;height:100%;\" class=\"player\">\r\n\t\t\t\t\t\t<video></video>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</a-affix>\r\n\t\t\t\t<div v-else id=\"videoContainer\" style=\"width: 100%;height:100%;\" class=\"player\">\r\n\t\t\t\t\t<video></video>\r\n\t\t\t\t</div>\r\n\t\t\t\t\r\n\t\t\t\t<div style=\"padding:10px;\" v-if=\"active\">\r\n\t\t\t\t\t<h4>{{active.fileName}}</h4>\r\n\t\t\t\t\t<div class=\"space\">\r\n\t\t\t\t\t\t<span class=\"span-desc\">{{active.visits}}次观看</span>\r\n\t\t\t\t\t\t<span class=\"span-desc\">文件大小：{{active.readableSize}}</span>\r\n\t\t\t\t\t\t<span class=\"span-desc\">更新时间：{{active.updatedDate}}</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</a-col>\r\n\t\t\t<a-col :xs=\"{span:24}\" :sm=\"{span:24}\" :md=\"{span:8}\" style=\"color:#fff;\">\r\n\t\t\t\t<div>\r\n\t\t\t\t\t<div style=\"padding:10px;color:#000;background: #fff;\" class=\"video-container-header\">\r\n\t\t\t\t\t\t<span style=\"font-weight: 600;font-size: 14px;margin:0;\">文件夹：{{query.path}}</span>\r\n\t\t\t\t\t\t<br/>\r\n\t\t\t\t\t\t<span style=\"font-size: 12px;color:#999;\">当前播放：{{currentPlayIndex}}<span\r\n\t\t\t\t\t\t\t\tstyle=\"margin:0 3px;\">/</span>{{maxTotal}}\r\n\t\t\t\t\t\t\t\t<a-icon type=\"environment\" style=\"cursor:pointer;margin-left: 10px;\"\r\n\t\t\t\t\t\t\t\t\t\t@click=\"scrollToPosition\"/>\r\n\t\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div style=\"border:1px solid #ccc;overflow-y: auto;overflow-x:hidden;\" class=\"video-list-container\"\r\n\t\t\t\t\t\t ref=\"container\">\r\n<!--\t\t\t\t\t\t<a-affix :target=\"() => this.$refs.container\" :offset-top=\"1\">-->\r\n<!--\t\t\t\t\t\t\t<div style=\"padding:10px;color:#000;background: #fff;\">-->\r\n<!--\t\t\t\t\t\t\t\t<span style=\"font-weight: 600;font-size: 14px;margin:0;\">文件夹：{{query.path}}</span>-->\r\n<!--\t\t\t\t\t\t\t\t<br/>-->\r\n<!--\t\t\t\t\t\t\t\t<span style=\"font-size: 12px;color:#999;\">当前播放：{{currentPlayIndex}}<span-->\r\n<!--\t\t\t\t\t\t\t\t\t\tstyle=\"margin:0 3px;\">/</span>{{maxTotal}}-->\r\n<!--\t\t\t\t\t\t\t\t<a-icon type=\"environment\" style=\"cursor:pointer;margin-left: 10px;\"-->\r\n<!--\t\t\t\t\t\t\t\t\t\t@click=\"scrollToPosition\"/>-->\r\n<!--\t\t\t\t\t\t\t\t</span>-->\r\n<!--\t\t\t\t\t\t\t</div>-->\r\n<!--\t\t\t\t\t\t</a-affix>-->\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\tref=\"infinite\"\r\n\t\t\t\t\t\t\t\tv-infinite-scroll=\"handleInfiniteOnLoad\"\r\n\t\t\t\t\t\t\t\tclass=\"demo-infinite-container video-list\"\r\n\t\t\t\t\t\t\t\t:infinite-scroll-disabled=\"!hasNextPage\"\r\n\t\t\t\t\t\t\t\t:infinite-scroll-distance=\"10\"\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<a-list item-layout=\"horizontal\" :data-source=\"videos\" :locale=\"{emptyText:'暂无数据'}\">\r\n\t\t\t\t\t\t\t\t<a-list-item slot=\"renderItem\" slot-scope=\"item,index\"\r\n\t\t\t\t\t\t\t\t\t\t\t @click=\"playChange(item)\"\r\n\t\t\t\t\t\t\t\t\t\t\t :class=\"`list-item ${active && active.id === item.id ? 'active'  : ''}`\">\r\n\t\t\t\t\t\t\t\t\t<a-list-item-meta>\r\n\t\t\t\t\t\t\t\t\t\t<div slot=\"title\" style=\"overflow: hidden;line-height: 20px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<h4 style=\"word-break:break-all;overflow: hidden;-webkit-line-clamp: 2; -webkit-box-orient: vertical;display: -webkit-box;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{item.fileName }}\r\n\t\t\t\t\t\t\t\t\t\t\t</h4>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div slot=\"description\" style=\"line-height: 12px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div class=\"space\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"span-desc\">{{item.visits}}次观看</span>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<span class=\"span-desc\">{{item.readableSize}}</span>\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t<div slot=\"avatar\"\r\n\t\t\t\t\t\t\t\t\t\t\t style=\"padding-left: 25px;position: relative;font-size: 12px;\">\r\n\t\t\t\t\t\t\t\t\t\t\t<div style=\"position: absolute;left: 0;font-size: 12px;width: 25px;text-align: center;line-height: 65px;color:#000;\">\r\n\t\t\t\t\t\t\t\t\t\t\t\t{{index+1}}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t<Thumb style=\"width:110px;height:65px;\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   :video-length=\"item.videoLength\"\r\n\t\t\t\t\t\t\t\t\t\t\t\t   :src=\"`/mos/${query.bucket}${item.urlEncodePath}?thumb=true`\"/>\r\n\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t</a-list-item-meta>\r\n\t\t\t\t\t\t\t\t</a-list-item>\r\n\t\t\t\t\t\t\t\t<div v-if=\"loading && hasNextPage\" class=\"demo-loading-container\">\r\n\t\t\t\t\t\t\t\t\t<a-spin/>\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</a-list>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</a-col>\r\n\t\t</a-row>\r\n\t</div>\r\n</template>\r\n<script>\r\n    import $ from 'jquery';\r\n    import Thumb from \"../resource/components/Thumb\";\r\n    import mt from '../../utils/mt';\r\n    import infiniteScroll from 'vue-infinite-scroll';\r\n    import Lock from \"../../utils/lock\";\r\n\r\n    let player;\r\n    export default {\r\n        name: \"VideoViewer\",\r\n        directives: {infiniteScroll},\r\n        components: {Thumb},\r\n        data() {\r\n            return {\r\n                query: {},\r\n                pages: {},\r\n                active: undefined,\r\n                loading: false,\r\n                pageSize: 50,\r\n                lock: new Lock()\r\n            }\r\n        },\r\n        mounted() {\r\n            let query = this.$route.query;\r\n            this.query = query;\r\n            let id = query.id;\r\n            let bucket = query.bucket;\r\n            let path = query.path;\r\n            if (!id || !bucket || !path) {\r\n                this.$message.warn('参数错误!');\r\n                return;\r\n            }\r\n            this.fetchResource();\r\n            this.resize();\r\n        },\r\n        methods: {\r\n            scrollToPosition() {\r\n                this.scrollToIndex(this.currentPlayIndex);\r\n            },\r\n            scrollToIndex(index) {\r\n                let videoElement = this.$el.getElementsByClassName('video-list-container')[0];\r\n                let items = this.$el.getElementsByClassName('list-item');\r\n                if (index > items.length) {\r\n                    this.handleInfiniteOnLoad();\r\n                    setTimeout(() => this.scrollToIndex(index), 100);\r\n                    return;\r\n                }\r\n                let item = items[index - 1];\r\n                videoElement.scrollTop = item.offsetTop;\r\n            },\r\n            nextVideo() {\r\n                let list = this.videos;\r\n                let nextIndex = this.currentPlayIndex;\r\n                if (!list) {\r\n                    return;\r\n                }\r\n                if (list[nextIndex]) {\r\n                    this.playResource(list[nextIndex]);\r\n                } else {\r\n                    this.playResource(list[0]);\r\n                }\r\n            },\r\n            playChange(record) {\r\n                this.playResource(record);\r\n            },\r\n            resize() {\r\n                const $videoContainer = $(\"#videoContainer\");\r\n                let width = $videoContainer.width();\r\n                let height = width / 1.6;\r\n                // let marginTop = ($(document).height() - height) / 2;\r\n                $videoContainer.css(\"height\", height + 'px');\r\n                if (!mt.isMobile()) {\r\n                    let headerHeight = $(\".video-container-header\").css(\"height\");\r\n                    $(\".video-list-container\").css(\"height\", `calc(${height}px - ${headerHeight})`);\r\n                } else {\r\n                    $(\".video-list-container\").css(\"height\", '800px');\r\n                }\r\n            },\r\n            handleInfiniteOnLoad() {\r\n                if (!this.hasNextPage) {\r\n                    return;\r\n                }\r\n                this.fetchRecentResources(this.nextPageNum);\r\n            },\r\n            fetchRecentResources(pageNum) {\r\n                pageNum = pageNum ? pageNum : 1;\r\n                if (this.pages['p' + pageNum]) {\r\n                    return;\r\n                }\r\n                let bucket = this.query.bucket;\r\n                let path = this.query.path;\r\n                this.loading = true;\r\n                this.$http.get(`/member/resource/${bucket}/files/video`, {\r\n                    params: {\r\n                        path,\r\n                        pageNum: pageNum,\r\n                        pageSize: this.pageSize\r\n                    }\r\n                }).then(value => {\r\n                    let page = value.data;\r\n                    this.loading = false;\r\n                    this.$set(this.pages, 'p' + pageNum, page);\r\n                }, reason => this.loading = false);\r\n            },\r\n            fetchResource() {\r\n                let bucket = this.query.bucket;\r\n                let id = this.query.id;\r\n                let path = this.query.path;\r\n                this.$http.get(`/member/resource/${bucket}/file/video/${id}`, {\r\n                    params: {\r\n                        path\r\n                    }\r\n                }).then(value => {\r\n                    let data = value.data;\r\n                    this.playResource(data);\r\n                    this.scrollToPosition();\r\n                });\r\n            },\r\n            playResource(data) {\r\n                document.title = data.fileName;\r\n                this.active = data;\r\n                let url = data.signUrl;\r\n                this.playVideo(url);\r\n                if (!this.isMobile) {\r\n                    history.pushState({}, data.fileName, `/viewer/video?id=${data.id}&bucket=${this.query.bucket}&path=${encodeURIComponent(this.query.path)}`);\r\n                }\r\n            },\r\n            play(url, html5m3u8) {\r\n                let vol = mt.getCookie('vol');\r\n                let videoObject = {\r\n                    container: '#videoContainer',//“#”代表容器的ID，“.”或“”代表容器的class\r\n                    variable: 'player',//该属性必需设置，值等于下面的new chplayer()的对象\r\n                    video: url,\r\n                    loop: false,\r\n                    click: true,\r\n                    html5m3u8: html5m3u8,\r\n                    autoplay: html5m3u8,\r\n                    // autoplay: true,\r\n                    loaded: (player) => {\r\n                        player.videoPlay();\r\n                        player.addListener('volume', vol => {\r\n                            mt.setCookie('vol', vol, 30);\r\n                        });\r\n                    },\r\n                    volume: vol !== null ? vol : 0.5\r\n                };\r\n                if (player) {\r\n                    videoObject.video = decodeURIComponent(url);\r\n                    videoObject.autoplay = true;\r\n                    player.newVideo(videoObject);\r\n                } else {\r\n                    player = new ckplayer(videoObject);\r\n                    player.addListener('ended', v => {\r\n                        this.nextVideo();\r\n                    });\r\n                }\r\n            },\r\n            //直接视频地址播放\r\n            playMp4(url) {\r\n                this.play(url, false);\r\n            },\r\n            playM3U8(url) {\r\n                this.play(url, true);\r\n            },\r\n            playVideo(url) {\r\n                url = url.replace('render=true', 'render=false');\r\n                url = url.replace('localhost', '192.168.0.174');\r\n                if (url.indexOf('.m3u8') !== -1) {\r\n                    // if(this.isMobile){\r\n                    //     let index = url.indexOf(\"?\");\r\n                    //     url = encodeURIComponent(url.substring(0, index)) + url.substring(index);\r\n                    // }\r\n                    this.playM3U8(url);\r\n                } else {\r\n                    let index = url.indexOf(\"?\");\r\n                    url = encodeURIComponent(url.substring(0, index)) + url.substring(index);\r\n                    this.playMp4(url);\r\n                }\r\n            },\r\n        },\r\n        computed: {\r\n            videos() {\r\n                let list = [];\r\n                for (let pageNum in this.pages) {\r\n                    for (let item of this.pages[pageNum].list) {\r\n                        list.push(item);\r\n                    }\r\n                }\r\n                return list;\r\n            },\r\n            hasNextPage() {\r\n                if (!this.pages) {\r\n                    return true;\r\n                }\r\n                let maxPage = 1;\r\n                for (let pageNum of Object.keys(this.pages)) {\r\n                    maxPage = Math.max(parseInt(pageNum.replace('p', '')), maxPage);\r\n                }\r\n                let max = this.pages['p' + maxPage];\r\n                if (!max) {\r\n                    return true;\r\n                }\r\n                return max.hasNextPage;\r\n            },\r\n            nextPageNum() {\r\n                if (!this.pages) {\r\n                    return 1;\r\n                }\r\n                let maxPage = 0;\r\n                for (let pageNum of Object.keys(this.pages)) {\r\n                    maxPage = Math.max(parseInt(pageNum.replace('p', '')), maxPage);\r\n                }\r\n                return maxPage + 1;\r\n            },\r\n            maxTotal() {\r\n                if (!this.pages) {\r\n                    return 0;\r\n                }\r\n                let page = this.pages['p1'];\r\n                if (!page) {\r\n                    return 0;\r\n                }\r\n                return page.total;\r\n            },\r\n            isMobile() {\r\n                return mt.isMobile();\r\n            },\r\n            currentPlayIndex() {\r\n                if (!this.active) {\r\n                    return 0;\r\n                }\r\n                if (this.active.rowNum) {\r\n                    return this.active.rowNum;\r\n                } else {\r\n                    for (let i = 0; i < this.videos.length; i++) {\r\n                        let item = this.videos[i];\r\n                        if (this.active.id === item.id) {\r\n                            return i + 1;\r\n                        }\r\n                    }\r\n                }\r\n                return 0;\r\n            }\r\n        },\r\n    }\r\n\r\n</script>\r\n\r\n<style scoped type=\"less\">\r\n\t@import \"index.less\";\r\n\t.border{\r\n\t\tborder:1px solid #000;\r\n\t}\r\n\t/*@media screen and (max-width: 575.98px) {*/\r\n\t/*\t.video-block {*/\r\n\t/*\t\tpadding: 10px;*/\r\n\t/*\t}*/\r\n\t/*}*/\r\n\t/*@media screen and (min-width: 576px) {*/\r\n\t/*\t.video-block {*/\r\n\t/*\t\tpadding: 20px;*/\r\n\t/*\t}*/\r\n\t/*\t.video-list .list-item:hover {*/\r\n\t/*\t\tbackground: #eee;*/\r\n\t/*\t\tcursor: pointer;*/\r\n\t/*\t}*/\r\n\t/*}*/\r\n</style>","export default class Lock {\r\n    constructor() {\r\n        this.state = false;\r\n    }\r\n\r\n    doWithLock(resolve) {\r\n        if (this.state) {\r\n            setTimeout(() => this.doWithLock(resolve), 100);\r\n        } else {\r\n            this.state = true;\r\n            let rs = resolve();\r\n            this.state = false;\r\n            return rs;\r\n        }\r\n    }\r\n}","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoViewer.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./VideoViewer.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./VideoViewer.vue?vue&type=template&id=513d90f4&scoped=true&\"\nimport script from \"./VideoViewer.vue?vue&type=script&lang=js&\"\nexport * from \"./VideoViewer.vue?vue&type=script&lang=js&\"\nimport style0 from \"./VideoViewer.vue?vue&type=style&index=0&id=513d90f4&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"513d90f4\",\n  null\n  \n)\n\nexport default component.exports","(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global.infiniteScroll = factory());\n}(this, function () { 'use strict';\n\n  var ctx = '@@InfiniteScroll';\n\n  var throttle = function throttle(fn, delay) {\n    var now, lastExec, timer, context, args; //eslint-disable-line\n\n    var execute = function execute() {\n      fn.apply(context, args);\n      lastExec = now;\n    };\n\n    return function () {\n      context = this;\n      args = arguments;\n\n      now = Date.now();\n\n      if (timer) {\n        clearTimeout(timer);\n        timer = null;\n      }\n\n      if (lastExec) {\n        var diff = delay - (now - lastExec);\n        if (diff < 0) {\n          execute();\n        } else {\n          timer = setTimeout(function () {\n            execute();\n          }, diff);\n        }\n      } else {\n        execute();\n      }\n    };\n  };\n\n  var getScrollTop = function getScrollTop(element) {\n    if (element === window) {\n      return Math.max(window.pageYOffset || 0, document.documentElement.scrollTop);\n    }\n\n    return element.scrollTop;\n  };\n\n  var getComputedStyle = document.defaultView.getComputedStyle;\n\n  var getScrollEventTarget = function getScrollEventTarget(element) {\n    var currentNode = element;\n    // bugfix, see http://w3help.org/zh-cn/causes/SD9013 and http://stackoverflow.com/questions/17016740/onscroll-function-is-not-working-for-chrome\n    while (currentNode && currentNode.tagName !== 'HTML' && currentNode.tagName !== 'BODY' && currentNode.nodeType === 1) {\n      var overflowY = getComputedStyle(currentNode).overflowY;\n      if (overflowY === 'scroll' || overflowY === 'auto') {\n        return currentNode;\n      }\n      currentNode = currentNode.parentNode;\n    }\n    return window;\n  };\n\n  var getVisibleHeight = function getVisibleHeight(element) {\n    if (element === window) {\n      return document.documentElement.clientHeight;\n    }\n\n    return element.clientHeight;\n  };\n\n  var getElementTop = function getElementTop(element) {\n    if (element === window) {\n      return getScrollTop(window);\n    }\n    return element.getBoundingClientRect().top + getScrollTop(window);\n  };\n\n  var isAttached = function isAttached(element) {\n    var currentNode = element.parentNode;\n    while (currentNode) {\n      if (currentNode.tagName === 'HTML') {\n        return true;\n      }\n      if (currentNode.nodeType === 11) {\n        return false;\n      }\n      currentNode = currentNode.parentNode;\n    }\n    return false;\n  };\n\n  var doBind = function doBind() {\n    if (this.binded) return; // eslint-disable-line\n    this.binded = true;\n\n    var directive = this;\n    var element = directive.el;\n\n    var throttleDelayExpr = element.getAttribute('infinite-scroll-throttle-delay');\n    var throttleDelay = 200;\n    if (throttleDelayExpr) {\n      throttleDelay = Number(directive.vm[throttleDelayExpr] || throttleDelayExpr);\n      if (isNaN(throttleDelay) || throttleDelay < 0) {\n        throttleDelay = 200;\n      }\n    }\n    directive.throttleDelay = throttleDelay;\n\n    directive.scrollEventTarget = getScrollEventTarget(element);\n    directive.scrollListener = throttle(doCheck.bind(directive), directive.throttleDelay);\n    directive.scrollEventTarget.addEventListener('scroll', directive.scrollListener);\n\n    this.vm.$on('hook:beforeDestroy', function () {\n      directive.scrollEventTarget.removeEventListener('scroll', directive.scrollListener);\n    });\n\n    var disabledExpr = element.getAttribute('infinite-scroll-disabled');\n    var disabled = false;\n\n    if (disabledExpr) {\n      this.vm.$watch(disabledExpr, function (value) {\n        directive.disabled = value;\n        if (!value && directive.immediateCheck) {\n          doCheck.call(directive);\n        }\n      });\n      disabled = Boolean(directive.vm[disabledExpr]);\n    }\n    directive.disabled = disabled;\n\n    var distanceExpr = element.getAttribute('infinite-scroll-distance');\n    var distance = 0;\n    if (distanceExpr) {\n      distance = Number(directive.vm[distanceExpr] || distanceExpr);\n      if (isNaN(distance)) {\n        distance = 0;\n      }\n    }\n    directive.distance = distance;\n\n    var immediateCheckExpr = element.getAttribute('infinite-scroll-immediate-check');\n    var immediateCheck = true;\n    if (immediateCheckExpr) {\n      immediateCheck = Boolean(directive.vm[immediateCheckExpr]);\n    }\n    directive.immediateCheck = immediateCheck;\n\n    if (immediateCheck) {\n      doCheck.call(directive);\n    }\n\n    var eventName = element.getAttribute('infinite-scroll-listen-for-event');\n    if (eventName) {\n      directive.vm.$on(eventName, function () {\n        doCheck.call(directive);\n      });\n    }\n  };\n\n  var doCheck = function doCheck(force) {\n    var scrollEventTarget = this.scrollEventTarget;\n    var element = this.el;\n    var distance = this.distance;\n\n    if (force !== true && this.disabled) return; //eslint-disable-line\n    var viewportScrollTop = getScrollTop(scrollEventTarget);\n    var viewportBottom = viewportScrollTop + getVisibleHeight(scrollEventTarget);\n\n    var shouldTrigger = false;\n\n    if (scrollEventTarget === element) {\n      shouldTrigger = scrollEventTarget.scrollHeight - viewportBottom <= distance;\n    } else {\n      var elementBottom = getElementTop(element) - getElementTop(scrollEventTarget) + element.offsetHeight + viewportScrollTop;\n\n      shouldTrigger = viewportBottom + distance >= elementBottom;\n    }\n\n    if (shouldTrigger && this.expression) {\n      this.expression();\n    }\n  };\n\n  var InfiniteScroll = {\n    bind: function bind(el, binding, vnode) {\n      el[ctx] = {\n        el: el,\n        vm: vnode.context,\n        expression: binding.value\n      };\n      var args = arguments;\n      el[ctx].vm.$on('hook:mounted', function () {\n        el[ctx].vm.$nextTick(function () {\n          if (isAttached(el)) {\n            doBind.call(el[ctx], args);\n          }\n\n          el[ctx].bindTryCount = 0;\n\n          var tryBind = function tryBind() {\n            if (el[ctx].bindTryCount > 10) return; //eslint-disable-line\n            el[ctx].bindTryCount++;\n            if (isAttached(el)) {\n              doBind.call(el[ctx], args);\n            } else {\n              setTimeout(tryBind, 50);\n            }\n          };\n\n          tryBind();\n        });\n      });\n    },\n    unbind: function unbind(el) {\n      if (el && el[ctx] && el[ctx].scrollEventTarget) el[ctx].scrollEventTarget.removeEventListener('scroll', el[ctx].scrollListener);\n    }\n  };\n\n  var install = function install(Vue) {\n    Vue.directive('InfiniteScroll', InfiniteScroll);\n  };\n\n  if (window.Vue) {\n    window.infiniteScroll = InfiniteScroll;\n    Vue.use(install); // eslint-disable-line\n  }\n\n  InfiniteScroll.install = install;\n\n  return InfiniteScroll;\n\n}));"],"sourceRoot":""}